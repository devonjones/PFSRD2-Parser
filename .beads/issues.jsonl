{"id":"PFSRD2-Parser-0ry","title":"Consider extracting structured data from ammunition modifiers","description":"Ammunition modifiers currently store price and bulk as plain text (e.g., '100 gp, 2 Bulk'). Consider whether this data should be extracted into structured fields for better querying and consistency.\n\nCurrent format (all siege weapons follow this pattern):\n{\n  \"text\": \"bomb arrows\",\n  \"modifiers\": [{\"name\": \"100 gp, 2 Bulk\"}]\n}\n\nExamples from parsed data:\n- Alchemical Springald: bomb arrows (100 gp, 2 Bulk)\n- Blasting Ram: ram powder charge (2 gp, 1 Bulk)  \n- Bombard: stone spheres (4 gp, 4 Bulk)\n- Cannon: cannonball (10 gp, 6 Bulk)\n\nThree options to consider:\n1. Extract structured fields from text (price: {value: 100, unit: 'gp'}, bulk: 2)\n2. Reference ammunition database objects (like trait enrichment)\n3. Keep as-is (simple, works for display)\n\nDecision depends on downstream usage and query requirements.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-14T22:16:55.479880024Z","updated_at":"2026-01-14T23:10:00.690215438Z","comments":[{"id":1,"issue_id":"PFSRD2-Parser-0ry","author":"devon","text":"Currently ammunition modifiers contain mixed data like '100 gp, 2 Bulk' stored as a plain text modifier.\n\nExample from siege weapon (Alchemical Springald):\n{\n  \"text\": \"bomb arrows\",\n  \"modifiers\": [{\"name\": \"100 gp, 2 Bulk\"}]\n}\n\nThree possible approaches:\n1. Extract structured fields (price, bulk) from modifier text\n2. Reference full ammunition objects (similar to trait enrichment from DB)\n3. Leave as-is (current simple approach)\n\nTrade-offs:\n- Option 1: More structured but requires parsing logic for varied formats\n- Option 2: More complete data but requires ammunition database and linking\n- Option 3: Simple and works, but less queryable/processable\n\nNeed to consider:\n- How is this data used downstream?\n- Are there queries that need price/bulk of ammunition?\n- Is consistency with other equipment fields important?\n- What formats do ammunition modifiers actually use across all equipment?","created_at":"2026-01-14T22:17:13Z"}]}
{"id":"PFSRD2-Parser-bcl","title":"Implement siege weapons parser","description":"Add siege weapons as a new equipment type to PFSRD2-Parser. Parse siege weapon HTML files with stats (Price, Usage, Crew, Proficiency, etc.), defensive stats (AC, Fort, Ref), item hitpoints (HP, Hardness, Immunities), and action sections (Aim, Load, Launch, Ram). Actions may have attack-like properties (damage, range, saving throws). Must also parse item level (like 'Item 1').","design":"Following the extensible equipment architecture pattern from weapons/armor/shields. Key implementation steps:\n1. Schema: Renamed shield_hitpoints to item_hitpoints, added protection/protections defs for immunities support (DONE)\n2. Equipment.py: Created _normalize_item_hitpoints() with immunities parsing from creatures pattern (DONE)\n3. Equipment.py: Added siege_weapon configuration to EQUIPMENT_TYPES with recognized_stats mapping (DONE)\n4. Need to implement: _normalize_defensive_stats() for AC/Fort/Ref parsing\n5. Need to implement: _normalize_speed() for speed field\n6. Need to implement: Action section parsing (Aim, Load, Launch, Ram) using extract_action_type from pfsrd2.action\n7. Need to implement: Attack parsing for Launch actions (damage, range, DC, burst)\n8. Need to implement: Item level parsing ('Item 1' format)\n9. Schema: Add siege_weapon_object definition\n10. Test on all 32 HTML files","notes":"COMPLETED: Full siege weapon parser implementation.\n- Schema: item_hitpoints with immunities, siege_weapon_object definition, speed_with_modifiers\n- Equipment.py: siege_weapon config in EQUIPMENT_TYPES, _siege_weapon_section_pass, _extract_siege_weapon_stats (handles multi-\u003chr\u003e layout), _extract_action_sections (parses Aim/Load/Launch/Ram with action costs), normalize_siege_weapon_fields  \n- Parsing: item level from h1, all stats (usage/crew/proficiency/ammunition/space/ac/fort/ref/hardness/hp/immunities/speed), actions with action_type, traits, source, price\n- Normalization: defensive stats, speed with modifiers, item_hitpoints with immunities, immunities parser\nTESTED: Successfully parses Bombard (ID 12) with all fields correctly structured.\nNEXT: Test on remaining 31 files to identify edge cases, validate schema passes, create unified runner script.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-01-13T06:32:21.803545679Z","updated_at":"2026-01-13T06:48:10.422100884Z"}
