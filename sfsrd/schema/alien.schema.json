{
	"$schema": "http://json-schema.org/draft-07/schema#",

	"definitions": {
		"ac": {
			"type": "object",
			"properties": {
				"name": {"enum": ["AC"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["armor_class"]},
				"eac": {"type": "integer"},
				"kac": {"type": "integer"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "eac", "kac"],
			"additionalProperties": false
		},
		"affliction": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["affliction"]},
				"affliction_type": {"type": "string"},
				"save": {"type": "string"},
				"onset": {"type": "string"},
				"track": {"type": "string"},
				"frequency": {"type": "string"},
				"effect": {"type": "string"},
				"cure": {"type": "string"}
			},
			"required": ["name", "type", "subtype", "affliction_type"],
			"additionalProperties": false
		},
		"afflictions": {
			"type": "array",
			"items": {"$ref": "#/definitions/affliction"},
			"additionalItems": false
		},
		"attack": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["attack"]},
				"name": {"type": "string"},
				"attack_type": {"enum": ["melee", "ranged", "multiattack"]},
				"weapon": {"type": "string"},
				"bonus": {"type": "integer"},
				"count": {"type": "integer"},
				"damage": {
					"type": "array",
					"items": {"$ref": "#/definitions/attack_damage"},
					"additionalItems": false
				},
				"explode": {"type": "boolean"},
				"range": {"type": "string"},
				"dc": {"type": "integer"}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"attack_damage": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["attack_damage"]},
				"formula": {"type": "string"},
				"damage_type": {"type": "string"},
				"damage_type_text": {"type": "string"},
				"effect": {"type": "string"},
				"notes": {"type": "string"},
				"nonlethal": {"type": "boolean"},
				"critical": {"type": "boolean"}
			},
			"required": ["type", "subtype"],
			"additionalProperties": false
		},
		"creature_type": {
			"type": "object",
			"properties": {
				"name": {"enum": ["creature_type"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["creature_type"]},
				"creature_type": {"enum": [
					"Aberration", "Animal", "Construct", "Dragon", "Fey",
					"Humanoid", "Magical Beast", "Monstrous Humanoid", "Ooze",
					"Outsider", "Plant", "Undead", "Vermin"
				]},
				"creature_subtypes": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "creature_type"],
			"additionalProperties": false
		},
		"defense": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Defense"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["defense"]},
				"hp": {"type": "integer"},
				"rp": {"type": "integer"},
				"ac": {"$ref": "#/definitions/ac"}, 
				"saves": {"$ref": "#/definitions/saves"},
				"defensive_abilities": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"immunities": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"resistances": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"weaknesses": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"dr": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"sr": {"type": "string"}
			},
			"required": ["name", "type", "subtype", "hp", "ac", "saves"],
			"additionalProperties": false
		},
		"ecology": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Ecology"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["ecology"]},
				"environment": {"type": "string"},
				"organization": {"type": "string"}
			},
			"required": [
				"name", "type", "subtype", "environment", "organization"
			],
			"additionalProperties": false
		},
		"image": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["image"]},
				"game-obj": {"type": "string"},
				"image": {"type": "string"}
			},
			"required": ["name", "type", "image"],
			"additionalProperties": false
		},
		"language": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["language"]},
				"name": {"type": "string"},
				"link": {"$ref": "#/definitions/link"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"languages": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["languages"]},
				"name": {"enum": ["Languages"]},
				"languages": {
					"type": "array",
					"items": {"$ref": "#/definitions/language"},
					"additionalItems": false
				},
				"communication_abilities": {"$ref": "#/definitions/modifiers"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"additionalProperties": false
		},
		"link": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["link"]},
				"alt": {"type": "string"},
				"href": {"type": "string"},
				"game-obj": {"enum": [
					"Spells", "Sources", "Skills", "Traits", "MonsterAbilities",
					"Conditions", "Languages", "Weapons", "Armor", "Shields",
					"Equipment", "Deities", "Feats", "Actions", "Monsters",
					"Heritages", "Rules", "Diseases", "Rituals", "Planes",
					"MonsterFamilies", "Domains", "Classes", "Ancestries",
					"Archetypes"
				]},
				"aonid": {"type": "integer"}
			},
			"required": ["name", "type", "alt"],
			"additionalProperties": false
		},
		"modifier": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": [
					"modifier", "graft", "sense", "creature_subtype",
					 "communication_ability", "other_ability", "gear",
					 "augmentation"]},
				"name": {"type": "string"},
				"links": {
					"type": "array",
					"items": {"$ref": "#/definitions/link"},
					"additionalItems": false
				}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"modifiers": {
			"type": "array",
			"items": {"$ref": "#/definitions/modifier"},
			"additionalItems": false
		},
		"number_with_modifiers": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Initiative"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["initiative"]},
				"value": {"type": "integer"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},
		"string_with_modifiers": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Special Attack", "Offensive Ability"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["special_attack", "offensive_ability"]},
				"value": {"type": "string"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},
		"offense": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Offense"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["offense"]},
				"speed": {"$ref": "#/definitions/speeds"},
				"space": {"type": "string"},
				"reach": {"$ref": "#/definitions/reach"},
				"melee": {
					"type": "array",
					"items": {"$ref": "#/definitions/attack"},
					"additionalItems": false
				},
				"ranged": {
					"type": "array",
					"items": {"$ref": "#/definitions/attack"},
					"additionalItems": false
				},
				"multiattack": {
					"type": "array",
					"items": {"$ref": "#/definitions/attack"},
					"additionalItems": false
				},
				"spells": {
					"type": "array",
					"items": {"$ref": "#/definitions/spells"},
					"additionalItems": false
				},
				"offensive_abilities":  {
					"type": "array",
					"items": {"$ref": "#/definitions/string_with_modifiers"},
					"additionalItems": false
				},
				"special_attacks": {
					"type": "array",
					"items": {"$ref": "#/definitions/string_with_modifiers"},
					"additionalItems": false
				},
				"connection": {"type": "string"}
			},
			"required": ["name", "type", "subtype", "speed"],
			"additionalProperties": false
		},
		"perception": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Perception"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["perception"]},
				"value": {"type": "integer"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},		
		"reach": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Reach"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["reach"]},
				"value": {"type": "string"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},
		"save": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Fort", "Ref", "Will"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["save"]},
				"value": {"type": "integer"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},
		"saves": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Saves"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["saves"]},
				"fort": {"$ref": "#/definitions/save"},
				"ref": {"$ref": "#/definitions/save"},
				"will": {"$ref": "#/definitions/save"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "fort", "ref", "will"],
			"additionalProperties": false
		},
		"section": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["section"]},
				"html": {"type": "string"},
				"sections": {"$ref": "#/definitions/sections"},
				"sources": {"$ref": "#/definitions/sources"},
				"subtype": {"enum": ["sidebar", "index"]},
				"sidebar_type": {"enum": [
					"treasure_and_rewards", "related_creatures", "locations",
					"additional_lore", "advice_and_rules"
				]},
				"sidebar_heading": {"type": "string"},
				"image": {"$ref": "#/definitions/image"}
			},
			"additionalProperties": false
		},
		"sections": {
			"type": "array",
			"items": {"$ref": "#/definitions/section"},
			"additionalItems": false
		},
		"skill": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["skill"]},
				"name": {"type": "string"},
				"value": {"type": "integer"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype", "value"],
			"additionalProperties": false
		},
		"skills": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["skills"]},
				"name": {"enum": ["Skills"]},
				"skills": {
					"type": "array",
					"items": {"$ref": "#/definitions/skill"},
					"additionalItems": false
				},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["type", "subtype", "skills"],
			"additionalProperties": false
		},
		"source": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["source"]},
				"link": {"$ref": "#/definitions/link"},
				"page": {"type": "integer"},
				"errata": {"$ref": "#/definitions/link"},
				"note": {"$ref": "#/definitions/link"}
			},
			"required": ["name", "type", "link", "page"],
			"additionalProperties": false
		},
		"sources": {
			"type": "array",
			"items": {"$ref": "#/definitions/source"},
			"additionalItems": false
		},
		"special_ability": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["special_ability"]},
				"name": {"type": "string"},
				"ability_type": {"enum": [
					"Extraordinary", "Spell-Like", "Supernatural"]},
				"ability_type_abbrev": {"enum": ["Ex", "Sp", "Su"]},
				"text": {"type": "string"},
				"links": {
					"type": "array",
					"items": {"$ref": "#/definitions/link"},
					"additionalItems": false
				}
			},
			"required": [
				"name", "type", "subtype", "ability_type",
				"ability_type_abbrev", "text"],
			"additionalProperties": false
		},
		"special_abilities": {
			"type": "array",
			"items": {"$ref": "#/definitions/special_ability"},
			"additionalItems": false
		},
		"senses": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["senses"]},
				"name": {"enum": ["Senses"]},
				"link": {"$ref": "#/definitions/link"},
				"perception": {"$ref": "#/definitions/perception"},
				"special_senses": {
					"type": "array",
					"items": {"$ref": "#/definitions/special_sense"},
					"additionalItems": false
				}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},		
		"special_sense": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["special_sense"]},
				"name": {"type": "string"},
				"link": {"$ref": "#/definitions/link"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},		
		"speed": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["stat_block_section"]},
				"movement_type": {"type": "string"},
				"value": {"type": "integer"},
				"subtype": {"enum": ["speed"]},
				"ability_type": {"enum": [
					"Extraordinary", "Spell-Like", "Supernatural"]},
				"ability_type_abbrev": {"enum": ["Ex", "Sp", "Su"]},
				"maneuverability": {"type": "string"},
				"modifiers": {"$ref": "#/definitions/modifiers"},
				"from": {"$ref": "#/definitions/link"}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"speeds": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Speed"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["speeds"]},
				"movement": {
					"type": "array",
					"items": {"$ref": "#/definitions/speed"},
					"additionalItems": false
				}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"spells": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["spells"]},
				"name": {"type": "string"},
				"text": {"type": "string"},
				"caster_level": {"type": "integer"},
				"melee": {"type": "integer"},
				"ranged": {"type": "integer"},
				"spell_list": {
					"type": "array",
					"items": {"$ref": "#/definitions/spell_list"},
					"additionalItems": false
				}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"spell": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["spell"]},
				"name": {"type": "string"},
				"spell_level": {"type": "integer"},
				"spell_dc": {"type": "integer"},
				"spell_range": {"type": "string"},
				"modifiers": {"$ref": "#/definitions/modifiers"}
			},
			"required": ["name", "type", "subtype"],
			"additionalProperties": false
		},
		"spell_list": {
			"type": "object",
			"properties": {
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["spell_list"]},
				"spell_level": {"type": "integer"},
				"spell_level_text": {"type": "string"},
				"spells": {
					"type": "array",
					"items": {"$ref": "#/definitions/spell"},
					"additionalItems": false
				},
				"count": {"type": "integer"},
				"frequency": {"type": "string"},
				"count_text": {"type": "string"}
			},
			"required": ["type", "subtype"],
			"additionalProperties": false
		},
		"statistics": {
			"type": "object",
			"properties": {
				"name": {"enum": ["Statistics"]},
				"type": {"enum": ["stat_block_section"]},
				"subtype": {"enum": ["statistics"]},
				"str": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"dex": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"con": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"int": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"wis": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"cha": {"anyOf": [{"type": "integer"}, {"type": "null"}]},
				"feats": {
					"type": "array",
					"items": {"type": "string"},
					"additionalItems": false
				},
				"skills": {"$ref": "#/definitions/skills"},
				"languages": {"$ref": "#/definitions/languages"},
				"other_abilities": {"$ref": "#/definitions/modifiers"},
				"gear": {"$ref": "#/definitions/modifiers"},
				"augmentations": {"$ref": "#/definitions/modifiers"}
			},
			"required": [
				"name", "type", "subtype", "str", "dex", "con", "int", "wis",
				"cha"
			],
			"additionalProperties": false
		},
		"stat_block": {
			"type": "object",
			"properties": {
				"name": {"type": "string"},
				"type": {"enum": ["stat_block"]},
				"alien_family": {"type": "string"},
				"cr": {"type": "string"},
				"role": {"enum": ["Expert", "Combatant", "Spellcaster"]},
				"xp": {"type": "integer"},
				"creature_type": {"$ref": "#/definitions/creature_type"},
				"grafts": {"$ref": "#/definitions/modifiers"},
				"alignment": {"enum": [
					"Lawful Good", "Lawful Neutral", "Lawful Evil",
					"Neutral Good", "Neutral", "Neutral Evil",
					"Chaotic Good", "Chaotic Neutral", "Chaotic Evil",
					"No Alignment", "Any"]},
				"size": {"enum": [
					"Fine", "Diminutive", "Tiny", "Small", "Medium", "Large", "Huge", "Gargantuan", "Colossal"
				]},
				"initiative": {"$ref": "#/definitions/number_with_modifiers"},
				"senses": {"$ref": "#/definitions/senses"},
				"aura": {"type": "string"},
				"defense": {"$ref": "#/definitions/defense"},
				"offense": {"$ref": "#/definitions/offense"},
				"statistics": {"$ref": "#/definitions/statistics"},
				"ecology": {"$ref": "#/definitions/ecology"},
				"special_abilities": {"$ref": "#/definitions/special_abilities"},
				"afflictions": {"$ref": "#/definitions/afflictions"},
				"image": { "items": {"$ref": "#/definitions/image"} }
			},
			"required": [
				"name", "type", "cr", "role", "xp", "alignment",
				"size", "creature_type", "initiative", "senses", "defense",
				"offense", "statistics"
			],
			"additionalProperties": false
		}
	},
	"type": "object",
	"properties": {
		"name": {"type": "string"},
		"type": {"enum": ["alien"]},
		"game-obj": {"enum": ["Aliens", "Starships"]},
		"stat_block": {"$ref": "#/definitions/stat_block"},
		"sources": {"$ref": "#/definitions/sources"},
		"sections": {"$ref": "#/definitions/sections"}
	},
	"required": ["name", "type", "game-obj", "sources", "stat_block"],
	"additionalProperties": false
}